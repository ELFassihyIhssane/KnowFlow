{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 76, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/USER/Desktop/GROW/Projects/KnowFlow_Project_d%27expertise/KnowFlow/frontend/lib/api-client.ts"],"sourcesContent":["import axios from \"axios\";\r\nimport type { QueryResponse } from \"@/lib/types\";\r\n\r\nconst API_BASE = process.env.NEXT_PUBLIC_API_BASE_URL || \"http://localhost:7000\";\r\n\r\nexport async function runQuery(question: string): Promise<QueryResponse> {\r\n  const { data } = await axios.post<QueryResponse>(`${API_BASE}/api/query`, { question });\r\n  return data;\r\n}\r\n\r\n// Optionnel (si tu as /api/graph c√¥t√© backend)\r\nexport async function fetchGraph(): Promise<{ nodes: any[]; edges: any[] }> {\r\n  const { data } = await axios.get(`${API_BASE}/api/graph/full`);\r\n  return data;\r\n}\r\n"],"names":[],"mappings":";;;;;;AAAA;;AAGA,MAAM,WAAW,QAAQ,GAAG,CAAC,wBAAwB,IAAI;AAElD,eAAe,SAAS,QAAgB;IAC7C,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM,gJAAK,CAAC,IAAI,CAAgB,GAAG,SAAS,UAAU,CAAC,EAAE;QAAE;IAAS;IACrF,OAAO;AACT;AAGO,eAAe;IACpB,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM,gJAAK,CAAC,GAAG,CAAC,GAAG,SAAS,eAAe,CAAC;IAC7D,OAAO;AACT"}},
    {"offset": {"line": 99, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/USER/Desktop/GROW/Projects/KnowFlow_Project_d%27expertise/KnowFlow/frontend/components/graph/GraphView.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport CytoscapeComponent from \"react-cytoscapejs\";\r\nimport type cytoscape from \"cytoscape\";\r\n\r\ntype GraphPayload = { nodes: any[]; edges: any[] } | null;\r\n\r\nexport function GraphView({ graph }: { graph: GraphPayload }) {\r\n  if (!graph) {\r\n    return (\r\n      <div className=\"h-[600px] overflow-hidden rounded-2xl border border-white/10 bg-slate-950/60 p-6 text-slate-200\">\r\n        (no graph loaded)\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const elements = [\r\n    ...(graph.nodes || []).map((n: any) => ({\r\n      data: {\r\n        id: String(n.id),\r\n        label: String(n.label ?? n.id),\r\n        type: String(n.type ?? \"Concept\"),\r\n        // utile si tu veux debug\r\n        // raw: n\r\n      }\r\n    })),\r\n    ...(graph.edges || []).map((e: any, i: number) => ({\r\n      data: {\r\n        id: String(e.id ?? `e-${i}`),\r\n        source: String(e.source),\r\n        target: String(e.target),\r\n        label: String(e.relation ?? \"rel\")\r\n      }\r\n    }))\r\n  ];\r\n\r\n  return (\r\n    <div className=\"rounded-2xl border border-white/10 bg-slate-950/40 p-4\">\r\n      <div className=\"mb-3 flex items-center justify-between\">\r\n        <div>\r\n          <div className=\"text-sm font-semibold text-slate-200\">Knowledge Graph</div>\r\n          <div className=\"text-xs text-slate-400\">\r\n            Tip: zoom with trackpad / wheel ‚Ä¢ drag nodes ‚Ä¢ hover edges to see relation\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"h-[650px] overflow-hidden rounded-2xl border border-white/10 bg-gradient-to-b from-slate-950 to-slate-900\">\r\n        <CytoscapeComponent\r\n          elements={elements}\r\n          style={{ width: \"100%\", height: \"100%\" }}\r\n          layout={{\r\n            // Layout ‚Äústable‚Äù et lisible (force-directed)\r\n            name: \"cose\",\r\n            animate: true,\r\n            randomize: false,\r\n            fit: true,\r\n            padding: 40,\r\n            nodeRepulsion: 9000,\r\n            idealEdgeLength: 140,\r\n            edgeElasticity: 0.2,\r\n            gravity: 0.25\r\n          }}\r\n          stylesheet={[\r\n            // =========================\r\n            // Base Node Style (lisible)\r\n            // =========================\r\n            {\r\n              selector: \"node\",\r\n              style: {\r\n                \"background-color\": \"#94B4C1\",\r\n                \"border-color\": \"#EAE0CF\",\r\n                \"border-width\": 1,\r\n                width: 38,\r\n                height: 38,\r\n\r\n                label: \"data(label)\",\r\n                color: \"#EAE0CF\",\r\n                \"font-size\": 12,\r\n                \"font-weight\": 600,\r\n\r\n                \"text-valign\": \"center\",\r\n                \"text-halign\": \"center\",\r\n\r\n                // ‚úÖ √©vite les √©normes phrases\r\n                \"text-wrap\": \"wrap\",\r\n                \"text-max-width\": 140,\r\n\r\n                // ‚úÖ lisibilit√© (halo autour du texte)\r\n                \"text-background-color\": \"#213448\",\r\n                \"text-background-opacity\": 0.7,\r\n                \"text-background-padding\": 3,\r\n                \"text-background-shape\": \"round-rectangle\"\r\n              }\r\n            },\r\n\r\n            // =========================\r\n            // Node Types (palette)\r\n            // =========================\r\n            {\r\n              selector: 'node[type = \"Paper\"]',\r\n              style: {\r\n                \"background-color\": \"#547792\",\r\n                shape: \"round-rectangle\",\r\n                width: 56,\r\n                height: 40\r\n              }\r\n            },\r\n            {\r\n              selector: 'node[type = \"Method\"]',\r\n              style: { \"background-color\": \"#94B4C1\", shape: \"ellipse\" }\r\n            },\r\n            {\r\n              selector: 'node[type = \"Problem\"]',\r\n              style: { \"background-color\": \"#213448\", shape: \"diamond\" }\r\n            },\r\n            {\r\n              selector: 'node[type = \"Experiment\"]',\r\n              style: { \"background-color\": \"#EAE0CF\", color: \"#213448\", shape: \"hexagon\" }\r\n            },\r\n            {\r\n              selector: 'node[type = \"Concept\"]',\r\n              style: { \"background-color\": \"#6E8EA0\", shape: \"round-triangle\" }\r\n            },\r\n\r\n            // =========================\r\n            // Edge Style (moins de bruit)\r\n            // =========================\r\n            {\r\n              selector: \"edge\",\r\n              style: {\r\n                width: 2,\r\n                \"line-color\": \"rgba(234,224,207,0.35)\",\r\n                \"curve-style\": \"bezier\",\r\n                \"target-arrow-shape\": \"triangle\",\r\n                \"target-arrow-color\": \"rgba(234,224,207,0.45)\",\r\n\r\n                // üö´ pas de label par d√©faut (sinon illisible)\r\n                label: \"\",\r\n                \"font-size\": 10,\r\n                color: \"#EAE0CF\"\r\n              }\r\n            },\r\n\r\n            // ‚úÖ relation visible uniquement au hover\r\n            {\r\n              selector: \"edge:hover\",\r\n              style: {\r\n                label: \"data(label)\",\r\n                width: 3,\r\n                \"line-color\": \"rgba(148,180,193,0.9)\",\r\n                \"target-arrow-color\": \"rgba(148,180,193,0.9)\",\r\n                \"text-background-color\": \"#213448\",\r\n                \"text-background-opacity\": 0.8,\r\n                \"text-background-padding\": 3,\r\n                \"text-background-shape\": \"round-rectangle\"\r\n              }\r\n            },\r\n\r\n            // =========================\r\n            // Hover Node (feedback)\r\n            // =========================\r\n            {\r\n              selector: \"node:hover\",\r\n              style: {\r\n                \"border-width\": 2,\r\n                \"border-color\": \"#94B4C1\"\r\n              }\r\n            },\r\n\r\n            // =========================\r\n            // Selected Node (debug)\r\n            // =========================\r\n            {\r\n              selector: \"node:selected\",\r\n              style: {\r\n                \"border-width\": 3,\r\n                \"border-color\": \"#EAE0CF\"\r\n              }\r\n            }\r\n          ]}\r\n          cy={(cy: cytoscape.Core) => {\r\n            // interactions smooth + defaults\r\n            cy.minZoom(0.35);\r\n            cy.maxZoom(2.5);\r\n\r\n            // double click = fit\r\ncy.on(\"dbltap\", () => {\r\n  cy.animate(\r\n    { fit: { eles: cy.elements(), padding: 60 } },\r\n    { duration: 250 }\r\n  );\r\n});\r\n\r\n          }}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 348, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/USER/Desktop/GROW/Projects/KnowFlow_Project_d%27expertise/KnowFlow/frontend/app/graph/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState } from \"react\";\r\nimport { fetchGraph } from \"@/lib/api-client\";\r\nimport { GraphView } from \"@/components/graph/GraphView\";\r\n\r\nexport default function GraphPage() {\r\n  const [loading, setLoading] = useState(false);\r\n  const [graph, setGraph] = useState<{ nodes: any[]; edges: any[] } | null>(null);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  async function load() {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const g = await fetchGraph();\r\n      setGraph(g);\r\n    } catch (e: any) {\r\n      setError(e?.message || \"Graph endpoint not available\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <main className=\"mx-auto max-w-6xl p-6\">\r\n      <h1 className=\"text-2xl font-semibold\">Knowledge Graph</h1>\r\n      <p className=\"mt-1 text-zinc-300\">\r\n        Cytoscape view of the KG (requires backend /api/graph).\r\n      </p>\r\n\r\n      <div className=\"mt-4 flex items-center gap-3\">\r\n        <button\r\n          onClick={load}\r\n          className=\"rounded-lg bg-zinc-800 px-4 py-2 hover:bg-zinc-700 disabled:opacity-60\"\r\n          disabled={loading}\r\n        >\r\n          {loading ? \"Loading...\" : \"Load graph\"}\r\n        </button>\r\n        {error && <span className=\"text-red-300\">{error}</span>}\r\n      </div>\r\n\r\n      <div className=\"mt-6\">\r\n        <GraphView graph={graph} />\r\n      </div>\r\n    </main>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAJA;;;;;AAMe,SAAS;IACtB,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IACvC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAwC;IAC1E,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAgB;IAElD,eAAe;QACb,WAAW;QACX,SAAS;QACT,IAAI;YACF,MAAM,IAAI,MAAM,IAAA,kIAAU;YAC1B,SAAS;QACX,EAAE,OAAO,GAAQ;YACf,SAAS,GAAG,WAAW;QACzB,SAAU;YACR,WAAW;QACb;IACF;IAEA,qBACE,8OAAC;QAAK,WAAU;;0BACd,8OAAC;gBAAG,WAAU;0BAAyB;;;;;;0BACvC,8OAAC;gBAAE,WAAU;0BAAqB;;;;;;0BAIlC,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBACC,SAAS;wBACT,WAAU;wBACV,UAAU;kCAET,UAAU,eAAe;;;;;;oBAE3B,uBAAS,8OAAC;wBAAK,WAAU;kCAAgB;;;;;;;;;;;;0BAG5C,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC,8IAAS;oBAAC,OAAO;;;;;;;;;;;;;;;;;AAI1B"}}]
}